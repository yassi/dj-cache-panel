{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Django Cache Panel","text":"<p>A universal cache inspector for Django.</p>"},{"location":"#overview","title":"Overview","text":"<p>Django Cache Panel is a Django admin extension that provides a web interface for inspecting and managing your Django cache backends. It works with any cache backend configured in your Django <code>CACHES</code> setting.</p>"},{"location":"#key-features","title":"Key Features","text":"<ul> <li>Browse Cache Instances: View all configured cache backends</li> <li>Abilities Matrix: See which operations each cache supports</li> <li>Key Management: Search, view, edit, delete, and add cache keys</li> <li>Backend Agnostic: Works with LocMem, Database, Redis, Memcached, File-based, and more</li> <li>Admin Integration: Seamlessly integrates with Django's admin interface</li> <li>Secure: Only accessible to staff users</li> </ul>"},{"location":"#supported-backends","title":"Supported Backends","text":"<p>All Django cache backends are supported with varying levels of functionality:</p> Backend Query Get Edit Add Delete Flush LocMemCache \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 DatabaseCache \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 RedisCache (Django) \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 RedisCache (django-redis) \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 FileBasedCache \u2014 \u2713 \u2713 \u2713 \u2713 \u2713 MemcachedCache \u2014 \u2713 \u2713 \u2713 \u2713 \u2713 DummyCache \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 <p>Query: List/search keys with patterns Get: Retrieve individual keys by name Edit: Modify existing key values Add: Create new cache entries Delete: Remove keys from cache Flush: Clear all cache entries</p> <p>Note: Even if the a functionality appears not available in the matrix above, <code>dj-cache-panel</code> allows custom defined classes that can customize logic for these abilities.</p>"},{"location":"#quick-links","title":"Quick Links","text":"<ul> <li>Installation</li> <li>Configuration</li> <li>Features</li> <li>Development</li> <li>Testing</li> </ul>"},{"location":"#requirements","title":"Requirements","text":"<ul> <li>Python 3.9+</li> <li>Django 4.2+</li> </ul>"},{"location":"#license","title":"License","text":"<p>MIT License - See LICENSE file for details.</p>"},{"location":"configuration/","title":"Configuration","text":"<p>Django Cache Panel works out of the box with your existing Django <code>CACHES</code> configuration. Advanced configuration is optional.</p>"},{"location":"configuration/#basic-configuration","title":"Basic Configuration","text":"<p>The only required configuration is your Django <code>CACHES</code> setting:</p> <pre><code># settings.py\nCACHES = {\n'default': {\n'BACKEND': 'django.core.cache.backends.locmem.LocMemCache',\n},\n'redis': {\n'BACKEND': 'django.core.cache.backends.redis.RedisCache',\n'LOCATION': 'redis://127.0.0.1:6379/1',\n},\n}\n</code></pre>"},{"location":"configuration/#advanced-configuration","title":"Advanced Configuration","text":"<p>For advanced use cases, you can customize behavior with <code>DJ_CACHE_PANEL_SETTINGS</code>:</p> <pre><code>DJ_CACHE_PANEL_SETTINGS = {\n# Custom panel mappings\n\"BACKEND_PANEL_EXTENSIONS\": {},\n# Per-cache ability overrides\n\"CACHES\": {},\n}\n</code></pre>"},{"location":"configuration/#custom-panel-mappings","title":"Custom Panel Mappings","text":"<p>Map custom cache backends to panel classes:</p> <pre><code>DJ_CACHE_PANEL_SETTINGS = {\n\"BACKEND_PANEL_EXTENSIONS\": {\n# Map custom backend to custom panel\n\"myapp.backends.CustomCache\": \"myapp.panels.CustomCachePanel\",\n# Override built-in backend\n\"django.core.cache.backends.redis.RedisCache\": \"myapp.panels.MyRedisPanel\",\n},\n}\n</code></pre> <p>Panel classes can be specified as:</p> <ul> <li>Simple name: <code>\"RedisCachePanel\"</code> (looked up in <code>dj_cache_panel.cache_panel</code>)</li> <li>Full path: <code>\"myapp.panels.CustomCachePanel\"</code> (imported dynamically)</li> </ul>"},{"location":"configuration/#per-cache-ability-overrides","title":"Per-Cache Ability Overrides","text":"<p>Restrict operations for specific caches:</p> <pre><code>DJ_CACHE_PANEL_SETTINGS = {\n\"CACHES\": {\n\"production_cache\": {\n\"abilities\": {\n\"query\": True,\n\"get_key\": True,\n\"delete_key\": False,  # Disable deletes\n\"edit_key\": False,    # Disable edits\n\"add_key\": False,     # Disable adds\n\"flush_cache\": False, # Disable flush\n},\n},\n},\n}\n</code></pre> <p>Available abilities:</p> <ul> <li><code>query</code>: List/search keys with patterns</li> <li><code>get_key</code>: View individual key values</li> <li><code>delete_key</code>: Delete keys</li> <li><code>edit_key</code>: Modify key values</li> <li><code>add_key</code>: Create new keys</li> <li><code>flush_cache</code>: Clear all cache entries</li> </ul>"},{"location":"configuration/#urls-configuration","title":"URLs Configuration","text":"<p>By default, the panel is accessible at <code>/admin/dj-cache-panel/</code>. You can change this:</p> <pre><code># urls.py\nurlpatterns = [\npath('admin/cache/', include('dj_cache_panel.urls')),  # Custom path\npath('admin/', admin.site.urls),\n]\n</code></pre>"},{"location":"configuration/#security","title":"Security","text":"<p>Django Cache Panel uses Django's built-in admin authentication:</p> <ul> <li>Only staff users (<code>is_staff=True</code>) can access the panel</li> <li>All views require authentication via <code>@staff_member_required</code></li> <li>No additional security configuration needed</li> </ul> <p>To restrict access further, use per-cache ability overrides or implement custom panel classes.</p>"},{"location":"development/","title":"Development","text":"<p>Contributing to Django Cache Panel or setting up for local development.</p>"},{"location":"development/#prerequisites","title":"Prerequisites","text":"<ul> <li>Python 3.9+</li> <li>Git</li> <li>Docker (recommended)</li> <li>Redis &amp; Memcached (for testing)</li> </ul>"},{"location":"development/#setup","title":"Setup","text":""},{"location":"development/#1-clone-repository","title":"1. Clone Repository","text":"<pre><code>git clone https://github.com/yassi/dj-cache-panel.git\ncd dj-cache-panel\n</code></pre>"},{"location":"development/#2-choose-development-environment","title":"2. Choose Development Environment","text":""},{"location":"development/#option-a-docker-recommended","title":"Option A: Docker (Recommended)","text":"<pre><code>make docker_up       # Start all services\nmake docker_shell    # Open shell in container\n</code></pre> <p>Services included: - Redis (port 6379) - Memcached (port 11211) - Development container</p>"},{"location":"development/#option-b-local-environment","title":"Option B: Local Environment","text":"<pre><code># Create virtual environment\npython -m venv venv\nsource venv/bin/activate  # Windows: venv\\Scripts\\activate\n# Install package and dependencies\nmake install\n# or\npip install -e .\npip install -r requirements.txt\n</code></pre> <p>Start external services: <pre><code># Redis\ndocker run -d -p 6379:6379 redis:latest\n\n# Memcached\ndocker run -d -p 11211:11211 memcached:latest\n</code></pre></p>"},{"location":"development/#3-set-up-example-project","title":"3. Set Up Example Project","text":"<pre><code>cd example_project\npython manage.py migrate\npython manage.py createsuperuser\n</code></pre>"},{"location":"development/#4-run-development-server","title":"4. Run Development Server","text":"<pre><code>python manage.py runserver\n</code></pre> <p>Visit: <code>http://127.0.0.1:8000/admin/</code></p>"},{"location":"development/#testing","title":"Testing","text":""},{"location":"development/#run-all-tests","title":"Run All Tests","text":"<pre><code># Docker\nmake test_docker\n\n# Local\nmake test_local\n</code></pre>"},{"location":"development/#run-specific-tests","title":"Run Specific Tests","text":"<pre><code>pytest tests/test_key_search.py -v\npytest tests/test_add_key.py::TestAddKey::test_add_simple_string_key\n</code></pre>"},{"location":"development/#with-coverage","title":"With Coverage","text":"<pre><code>pytest --cov=dj_cache_panel tests/\n</code></pre>"},{"location":"development/#project-structure","title":"Project Structure","text":"<pre><code>dj-cache-panel/\n\u251c\u2500\u2500 dj_cache_panel/           # Main package\n\u2502   \u251c\u2500\u2500 cache_panel.py        # Backend-specific panel classes\n\u2502   \u251c\u2500\u2500 views.py              # Django views\n\u2502   \u251c\u2500\u2500 urls.py               # URL patterns\n\u2502   \u251c\u2500\u2500 models.py             # Placeholder model\n\u2502   \u251c\u2500\u2500 admin.py              # Admin integration\n\u2502   \u2514\u2500\u2500 templates/            # HTML templates\n\u251c\u2500\u2500 tests/                    # Test suite\n\u2502   \u251c\u2500\u2500 base.py               # Test base class\n\u2502   \u251c\u2500\u2500 test_*.py             # Test modules\n\u2502   \u2514\u2500\u2500 conftest.py           # Pytest configuration\n\u251c\u2500\u2500 example_project/          # Example Django project\n\u251c\u2500\u2500 docs/                     # Documentation\n\u2514\u2500\u2500 Makefile                  # Development commands\n</code></pre>"},{"location":"development/#key-components","title":"Key Components","text":""},{"location":"development/#panel-classes-cache_panelpy","title":"Panel Classes (<code>cache_panel.py</code>)","text":"<p>Base class for cache backend implementations:</p> <pre><code>class CachePanel:\nABILITIES = {\n\"query\": False,\n\"get_key\": False,\n# ...\n}\ndef _query(self, pattern, page, per_page):\n\"\"\"Implement key listing\"\"\"\npass\n</code></pre> <p>Subclass for specific backends: - <code>LocalMemoryCachePanel</code> - <code>DatabaseCachePanel</code> - <code>RedisCachePanel</code> - <code>DjangoRedisCachePanel</code> - <code>FileBasedCachePanel</code> - <code>MemcachedCachePanel</code> - <code>DummyCachePanel</code></p>"},{"location":"development/#views-viewspy","title":"Views (<code>views.py</code>)","text":"<ul> <li><code>index</code>: List all caches</li> <li><code>key_search</code>: Search and browse keys</li> <li><code>key_detail</code>: View/edit/delete individual key</li> <li><code>key_add</code>: Add new keys</li> </ul>"},{"location":"development/#tests-tests","title":"Tests (<code>tests/</code>)","text":"<p>View-layer functional tests: - Test through Django test client - Run against all cache backends - Use <code>subTest</code> for backend iteration</p>"},{"location":"development/#making-changes","title":"Making Changes","text":""},{"location":"development/#adding-a-new-feature","title":"Adding a New Feature","text":"<ol> <li>Update panel class if needed</li> <li>Modify view logic</li> <li>Update template</li> <li>Add tests</li> <li>Update documentation</li> </ol>"},{"location":"development/#adding-backend-support","title":"Adding Backend Support","text":"<ol> <li>Create new panel class in <code>cache_panel.py</code></li> <li>Define <code>ABILITIES</code></li> <li>Implement <code>_query</code> (if supported)</li> <li>Add to <code>BACKEND_PANEL_MAP_DEFAULT</code></li> <li>Add tests</li> </ol>"},{"location":"development/#modifying-templates","title":"Modifying Templates","text":"<p>Templates use Django admin styling: - Extend <code>admin/dj_cache_panel/base.html</code> - Use admin CSS variables - Support dark mode</p>"},{"location":"development/#code-style","title":"Code Style","text":"<ul> <li>Follow PEP 8</li> <li>Use type hints where helpful</li> <li>Write docstrings for public methods</li> <li>Keep functions focused and small</li> </ul>"},{"location":"development/#running-linters","title":"Running Linters","text":"<pre><code># Linters run automatically with read_lints tool\n# Or run manually:\nruff check dj_cache_panel/\n</code></pre>"},{"location":"development/#makefile-commands","title":"Makefile Commands","text":"<pre><code>make install        # Install dependencies\nmake test_local     # Run tests locally\nmake test_docker    # Run tests in Docker\nmake docker_up      # Start Docker services\nmake docker_down    # Stop Docker services\nmake docker_shell   # Open shell in container\n</code></pre>"},{"location":"development/#contributing","title":"Contributing","text":"<ol> <li>Fork the repository</li> <li>Create a feature branch</li> <li>Make your changes</li> <li>Add tests</li> <li>Run test suite</li> <li>Submit pull request</li> </ol>"},{"location":"development/#environment-variables","title":"Environment Variables","text":"<p>For testing with Docker:</p> <pre><code>REDIS_HOST=redis        # Default: localhost\nREDIS_PORT=6379         # Default: 6379\nMEMCACHED_HOST=memcached # Default: localhost\nMEMCACHED_PORT=11211    # Default: 11211\n</code></pre>"},{"location":"features/","title":"Features","text":"<p>Django Cache Panel provides comprehensive cache management through Django's admin interface.</p>"},{"location":"features/#cache-overview","title":"Cache Overview","text":""},{"location":"features/#django-admin-integration","title":"Django Admin Integration","text":"<p>Django Cache Panel seamlessly integrates into your Django admin interface:</p> <p></p>"},{"location":"features/#instance-list","title":"Instance List","text":"<p>View all configured cache backends from your <code>CACHES</code> setting:</p> <p></p> <ul> <li>Cache name and backend type</li> <li>Supported operations matrix</li> <li>Quick access to key search</li> </ul>"},{"location":"features/#abilities-matrix","title":"Abilities Matrix","text":"<p>Each cache backend displays which operations it supports:</p> <ul> <li>Query: List keys with wildcard patterns</li> <li>Get: Retrieve individual keys</li> <li>Edit: Modify key values</li> <li>Add: Create new entries</li> <li>Delete: Remove keys</li> <li>Flush: Clear all entries</li> </ul>"},{"location":"features/#key-management","title":"Key Management","text":""},{"location":"features/#search-browse","title":"Search &amp; Browse","text":"<p>For query-supported caches (LocMem, Database, Redis):</p> <ul> <li>Wildcard search: <code>user:*</code>, <code>session:?abc</code></li> <li>List all keys with <code>*</code></li> <li>Paginated results</li> </ul> <p>For all caches:</p> <ul> <li>Exact key lookup by name</li> <li>No wildcards needed</li> </ul>"},{"location":"features/#view-edit-key-details","title":"View &amp; Edit Key Details","text":"<p>Click any key to view:</p> <ul> <li>Key name</li> <li>Cache backend</li> <li>Value (formatted as JSON if applicable)</li> <li>Value type</li> </ul>"},{"location":"features/#edit-keys","title":"Edit Keys","text":"<p>Modify existing cache entries:</p> <ul> <li>Edit value directly in textarea</li> <li>Parse JSON automatically</li> <li>Set optional timeout (TTL)</li> <li>Disabled if cache doesn't support editing</li> </ul>"},{"location":"features/#add-keys","title":"Add Keys","text":"<p>Create new cache entries:</p> <ul> <li>Specify key name</li> <li>Enter value (JSON or plain text)</li> <li>Set optional timeout</li> <li>Available if cache supports adding</li> </ul>"},{"location":"features/#delete-keys","title":"Delete Keys","text":"<p>Remove individual keys:</p> <ul> <li>Confirmation dialog</li> <li>Success/error messages</li> <li>Redirect to search page</li> </ul>"},{"location":"features/#flush-cache","title":"Flush Cache","text":"<p>Clear all entries from a cache:</p> <ul> <li>Confirmation dialog before flush</li> <li>Disabled for caches that don't support it</li> <li>Success/error feedback</li> </ul>"},{"location":"features/#backend-support","title":"Backend Support","text":""},{"location":"features/#locmemcache-local-memory","title":"LocMemCache (Local Memory)","text":"<ul> <li>Query: \u2713 (pattern matching with <code>*</code> and <code>?</code>)</li> <li>Get/Edit/Add/Delete/Flush: \u2713</li> </ul>"},{"location":"features/#databasecache","title":"DatabaseCache","text":"<ul> <li>Query: \u2713 (SQL LIKE pattern matching)</li> <li>Get/Edit/Add/Delete/Flush: \u2713</li> </ul>"},{"location":"features/#rediscache-django-django-redis","title":"RedisCache (Django &amp; django-redis)","text":"<ul> <li>Query: \u2713 (Redis SCAN with pattern matching)</li> <li>Get/Edit/Add/Delete/Flush: \u2713</li> <li>Shows Redis key name (with prefix)</li> </ul>"},{"location":"features/#filebasedcache","title":"FileBasedCache","text":"<ul> <li>Query: \u2717 (keys stored as hashed filenames)</li> <li>Get/Edit/Add/Delete/Flush: \u2713</li> <li>Exact key lookup only</li> </ul>"},{"location":"features/#memcachedcache","title":"MemcachedCache","text":"<ul> <li>Query: \u2717 (Memcached protocol limitation)</li> <li>Get/Edit/Add/Delete/Flush: \u2713</li> <li>Exact key lookup only</li> </ul>"},{"location":"features/#dummycache","title":"DummyCache","text":"<ul> <li>No operations supported (no-op cache)</li> </ul>"},{"location":"features/#user-interface","title":"User Interface","text":""},{"location":"features/#admin-integration","title":"Admin Integration","text":"<ul> <li>Appears in Django admin sidebar</li> <li>Uses Django admin theme</li> <li>Responsive dark mode support</li> </ul>"},{"location":"features/#search-interface","title":"Search Interface","text":"<ul> <li>Pattern input with help text</li> <li>Results per page selector</li> <li>Pagination controls</li> <li>Key count display</li> </ul>"},{"location":"features/#key-detail-page","title":"Key Detail Page","text":"<ul> <li>Formatted value display</li> <li>Edit form with save button</li> <li>Delete button (top right)</li> <li>Backend information</li> </ul>"},{"location":"features/#messages","title":"Messages","text":"<ul> <li>Success notifications (green)</li> <li>Error notifications (red)</li> <li>Warning messages (yellow)</li> <li>Django messages framework</li> </ul>"},{"location":"features/#pagination","title":"Pagination","text":"<ul> <li>Default: 25 keys per page</li> <li>Options: 10, 25, 50, 100</li> <li>Page navigation</li> <li>Total count display</li> </ul>"},{"location":"features/#special-features","title":"Special Features","text":""},{"location":"features/#redis-key-names","title":"Redis Key Names","text":"<p>For Redis backends, both the user-facing key and the actual Redis key (with prefix) are displayed:</p> Key Redis Key <code>user:123</code> <code>:1:user:123</code>"},{"location":"features/#json-formatting","title":"JSON Formatting","text":"<p>Values are automatically formatted:</p> <ul> <li>Dicts/lists displayed as pretty-printed JSON</li> <li>Edit form accepts JSON strings</li> <li>Automatic parsing on save</li> </ul>"},{"location":"features/#timeout-support","title":"Timeout Support","text":"<p>Set cache expiration when editing or adding keys:</p> <ul> <li>Optional timeout field</li> <li>In seconds</li> <li>Empty = use cache default</li> </ul>"},{"location":"features/#keyboard-navigation","title":"Keyboard Navigation","text":"<ul> <li>Tab through form fields</li> <li>Enter to submit forms</li> <li>Esc to close dialogs</li> </ul>"},{"location":"installation/","title":"Installation","text":""},{"location":"installation/#1-install-the-package","title":"1. Install the Package","text":"<pre><code>pip install dj-cache-panel\n</code></pre>"},{"location":"installation/#2-add-to-django-settings","title":"2. Add to Django Settings","text":"<p>Add <code>dj_cache_panel</code> to your <code>INSTALLED_APPS</code>:</p> <pre><code>INSTALLED_APPS = [\n'django.contrib.admin',\n'django.contrib.auth',\n'django.contrib.contenttypes',\n'django.contrib.sessions',\n'django.contrib.messages',\n'django.contrib.staticfiles',\n'dj_cache_panel',  # Add this\n# ... your other apps\n]\n</code></pre>"},{"location":"installation/#3-include-urls","title":"3. Include URLs","text":"<p>Add the Cache Panel URLs to your main <code>urls.py</code>:</p> <pre><code>from django.contrib import admin\nfrom django.urls import path, include\nurlpatterns = [\npath('admin/dj-cache-panel/', include('dj_cache_panel.urls')),\npath('admin/', admin.site.urls),\n]\n</code></pre>"},{"location":"installation/#4-run-migrations","title":"4. Run Migrations","text":"<pre><code>python manage.py migrate\n</code></pre>"},{"location":"installation/#5-access-the-panel","title":"5. Access the Panel","text":"<ol> <li> <p>Start your Django development server:    <pre><code>python manage.py runserver\n</code></pre></p> </li> <li> <p>Navigate to <code>http://127.0.0.1:8000/admin/</code></p> </li> <li> <p>Look for the \"DJ_CACHE_PANEL\" section</p> </li> <li> <p>Click \"Manage Cache keys and values\"</p> </li> </ol> <p>That's it! No additional configuration required. Django Cache Panel will automatically detect all cache backends defined in your <code>CACHES</code> setting.</p>"},{"location":"testing/","title":"Testing","text":"<p>Comprehensive test suite for Django Cache Panel.</p>"},{"location":"testing/#overview","title":"Overview","text":"<p>Tests are functional (end-to-end) and target the view layer to ensure complete coverage.</p>"},{"location":"testing/#test-structure","title":"Test Structure","text":"<pre><code>tests/\n\u251c\u2500\u2500 base.py              # Base test class and configuration\n\u251c\u2500\u2500 conftest.py          # Pytest configuration\n\u251c\u2500\u2500 test_admin.py        # Admin integration tests\n\u251c\u2500\u2500 test_key_search.py   # Key search functionality\n\u251c\u2500\u2500 test_add_key.py      # Adding keys\n\u251c\u2500\u2500 test_edit_key.py     # Editing keys\n\u251c\u2500\u2500 test_delete_key.py   # Deleting keys\n\u2514\u2500\u2500 test_flush_cache.py  # Flushing caches\n</code></pre>"},{"location":"testing/#running-tests","title":"Running Tests","text":""},{"location":"testing/#prerequisites","title":"Prerequisites","text":"<p>Redis and Memcached must be running:</p> <pre><code># Docker (recommended)\ndocker-compose up -d\n\n# Or individual containers\ndocker run -d -p 6379:6379 redis:latest\ndocker run -d -p 11211:11211 memcached:latest\n</code></pre>"},{"location":"testing/#run-all-tests","title":"Run All Tests","text":"<pre><code># Using Make\nmake test_local\n\n# Using pytest directly\npytest tests/\n\n# With verbose output\npytest tests/ -v\n</code></pre>"},{"location":"testing/#run-specific-tests","title":"Run Specific Tests","text":"<pre><code># Single file\npytest tests/test_add_key.py\n\n# Single test\npytest tests/test_add_key.py::TestAddKey::test_add_simple_string_key\n\n# With pattern\npytest tests/ -k \"add_key\"\n</code></pre>"},{"location":"testing/#with-coverage","title":"With Coverage","text":"<pre><code>pytest --cov=dj_cache_panel tests/\n\n# HTML report\npytest --cov=dj_cache_panel --cov-report=html tests/\nopen htmlcov/index.html\n</code></pre>"},{"location":"testing/#test-configuration","title":"Test Configuration","text":""},{"location":"testing/#cache-backends-basepy","title":"Cache Backends (<code>base.py</code>)","text":"<p>Tests run against multiple backends:</p> <pre><code>TEST_CACHES = {\n'default': LocMemCache,\n'locmem': LocMemCache,\n'database': DatabaseCache,\n'filesystem': FileBasedCache,\n'dummy': DummyCache,\n'redis': RedisCache,\n'django_redis': DjangoRedisCache,\n'memcached': MemcachedCache,\n}\n</code></pre>"},{"location":"testing/#cache-categories","title":"Cache Categories","text":"<p>Tests iterate through categorized caches:</p> <ul> <li>QUERY_SUPPORTED_CACHES: <code>locmem</code>, <code>database</code>, <code>redis</code>, <code>django_redis</code></li> <li>NON_QUERY_CACHES: <code>dummy</code>, <code>filesystem</code>, <code>memcached</code></li> <li>OPERATIONAL_CACHES: All except <code>dummy</code></li> </ul>"},{"location":"testing/#test-patterns","title":"Test Patterns","text":""},{"location":"testing/#view-layer-testing","title":"View Layer Testing","text":"<p>Tests go through Django views (not direct panel access):</p> <pre><code>def test_add_key(self):\nfor cache_name in OPERATIONAL_CACHES:\nwith self.subTest(cache=cache_name):\ncache = caches[cache_name]\n# Test via view\nurl = reverse(\"dj_cache_panel:key_add\", args=[cache_name])\nresponse = self.client.post(url, {\"key\": \"test\", \"value\": \"val\"})\n# Verify in cache\nself.assertEqual(cache.get(\"test\"), \"val\")\n</code></pre>"},{"location":"testing/#subtests-for-multiple-backends","title":"SubTests for Multiple Backends","text":"<p>Each test runs against relevant backends:</p> <pre><code>def test_feature(self):\nfor cache_name in QUERY_SUPPORTED_CACHES:\nwith self.subTest(cache=cache_name):\n# Test implementation\npass\n</code></pre>"},{"location":"testing/#test-coverage","title":"Test Coverage","text":""},{"location":"testing/#admin-integration-test_adminpy","title":"Admin Integration (<code>test_admin.py</code>)","text":"<ul> <li>Panel appears in admin</li> <li>Redirects work correctly</li> <li>Authentication required</li> <li>Staff-only access</li> </ul>"},{"location":"testing/#key-search-test_key_searchpy","title":"Key Search (<code>test_key_search.py</code>)","text":"<ul> <li>Page loads for all backends</li> <li>Wildcard search works</li> <li>Exact key lookup</li> <li>Pagination</li> <li>Empty results</li> <li>Backend-specific messages</li> </ul>"},{"location":"testing/#add-keys-test_add_keypy","title":"Add Keys (<code>test_add_key.py</code>)","text":"<ul> <li>Simple string values</li> <li>JSON values</li> <li>Custom timeouts</li> <li>Success messages</li> <li>Duplicate key handling</li> <li>Authentication required</li> </ul>"},{"location":"testing/#edit-keys-test_edit_keypy","title":"Edit Keys (<code>test_edit_key.py</code>)","text":"<ul> <li>Update string values</li> <li>Update JSON values</li> <li>Custom timeouts</li> <li>Success messages</li> <li>Non-existent key handling</li> <li>Special characters in keys</li> </ul>"},{"location":"testing/#delete-keys-test_delete_keypy","title":"Delete Keys (<code>test_delete_key.py</code>)","text":"<ul> <li>Delete existing keys</li> <li>Success messages</li> <li>Non-existent key handling</li> <li>Multiple deletions</li> <li>Special characters in keys</li> </ul>"},{"location":"testing/#flush-cache-test_flush_cachepy","title":"Flush Cache (<code>test_flush_cache.py</code>)","text":"<ul> <li>Removes all keys</li> <li>Success messages</li> <li>Disabled cache handling</li> <li>Authentication required</li> </ul>"},{"location":"testing/#environment-variables","title":"Environment Variables","text":"<p>Configure external services:</p> <pre><code># Redis\nexport REDIS_HOST=localhost\nexport REDIS_PORT=6379\n# Memcached\nexport MEMCACHED_HOST=localhost\nexport MEMCACHED_PORT=11211\n</code></pre>"},{"location":"testing/#cicd-integration","title":"CI/CD Integration","text":""},{"location":"testing/#github-actions","title":"GitHub Actions","text":"<pre><code>services:\nredis:\nimage: redis:latest\nports:\n- 6379:6379\nmemcached:\nimage: memcached:latest\nports:\n- 11211:11211\nenv:\nREDIS_HOST: localhost\nMEMCACHED_HOST: localhost\n</code></pre>"},{"location":"testing/#gitlab-ci","title":"GitLab CI","text":"<pre><code>services:\n- redis:latest\n- memcached:latest\nvariables:\nREDIS_HOST: redis\nMEMCACHED_HOST: memcached\n</code></pre>"},{"location":"testing/#writing-tests","title":"Writing Tests","text":""},{"location":"testing/#test-template","title":"Test Template","text":"<pre><code>from .base import CacheTestCase, OPERATIONAL_CACHES\nfrom django.urls import reverse\nfrom django.core.cache import caches\nclass TestMyFeature(CacheTestCase):\ndef test_my_feature(self):\nfor cache_name in OPERATIONAL_CACHES:\nwith self.subTest(cache=cache_name):\ncache = caches[cache_name]\n# Setup\ncache.set(\"test_key\", \"test_value\", timeout=300)\n# Execute\nurl = reverse(\"dj_cache_panel:view_name\", args=[cache_name])\nresponse = self.client.get(url)\n# Assert\nself.assertEqual(response.status_code, 200)\n</code></pre>"},{"location":"testing/#guidelines","title":"Guidelines","text":"<ol> <li>Test through views: Don't access panel classes directly</li> <li>Use subTest: Run against multiple backends</li> <li>Clean up: <code>setUp</code> and <code>tearDown</code> handle cache clearing</li> <li>Be specific: Use appropriate cache categories</li> <li>Check both: Response status AND cache state</li> </ol>"},{"location":"testing/#debugging-tests","title":"Debugging Tests","text":""},{"location":"testing/#run-with-verbose-output","title":"Run with verbose output","text":"<pre><code>pytest tests/ -vv\n</code></pre>"},{"location":"testing/#run-with-print-statements","title":"Run with print statements","text":"<pre><code>pytest tests/ -s\n</code></pre>"},{"location":"testing/#run-single-test-with-debugger","title":"Run single test with debugger","text":"<pre><code>pytest tests/test_add_key.py::TestAddKey::test_add_simple_string_key --pdb\n</code></pre>"},{"location":"testing/#check-specific-cache","title":"Check specific cache","text":"<pre><code># Test only LocMem\npytest tests/ -k \"locmem\"\n# Test only Redis\npytest tests/ -k \"redis\"\n</code></pre>"},{"location":"testing/#common-issues","title":"Common Issues","text":""},{"location":"testing/#redis-connection-refused","title":"Redis Connection Refused","text":"<p>Error: <code>redis.exceptions.ConnectionError: Error 111 connecting to localhost:6379</code></p> <p>Solution: Start Redis: <pre><code>docker run -d -p 6379:6379 redis:latest\n</code></pre></p>"},{"location":"testing/#memcached-connection-issues","title":"Memcached Connection Issues","text":"<p>Error: Connection errors to Memcached</p> <p>Solution: Start Memcached: <pre><code>docker run -d -p 11211:11211 memcached:latest\n</code></pre></p>"},{"location":"testing/#database-locked","title":"Database Locked","text":"<p>Error: <code>database is locked</code></p> <p>Solution: Using SQLite in tests is fine, but avoid parallel execution: <pre><code>pytest tests/ -n0  # Disable parallel\n</code></pre></p>"}]}